testcase: "HTTPS Testing Demo"
description: "Test HTTPS functionality with public httpbin.org"

variables:
  vars:
    http_url: "http://localhost:8000"
    https_url: "https://httpbin.org"

steps:
  - name: "Test HTTP endpoint (local)"
    action: http
    args: ["GET", "${http_url}/status/200"]
    result: http_response

  - name: "Log HTTP response"
    action: log
    args: ["HTTP Status: ${http_response.status_code}"]

  - name: "Test HTTPS endpoint (public)"
    action: http
    args: ["GET", "${https_url}/status/200"]
    result: https_response

  - name: "Log HTTPS response"
    action: log
    args: ["HTTPS Status: ${https_response.status_code}"]

  - name: "Test HTTPS with different status codes"
    action: http
    args: ["GET", "${https_url}/status/500"]
    result: https_error_response

  - name: "Log HTTPS error response"
    action: log
    args: ["HTTPS Error Status: ${https_error_response.status_code}"]

  - name: "Test HTTPS POST request"
    action: http
    args: ["POST", "${https_url}/post"]
    result: https_post_response
    options:
      body: '{"test": "data", "message": "Hello HTTPS!"}'
      headers:
        Content-Type: application/json

  - name: "Log HTTPS POST response"
    action: log
    args: ["HTTPS POST Status: ${https_post_response.status_code}"]

  - name: "Verify all responses are valid"
    action: assert
    args: ["${http_response.status_code}", "==", "200", "HTTP response should be 200"]

  - name: "Verify HTTPS response is valid"
    action: assert
    args: ["${https_response.status_code}", "==", "200", "HTTPS response should be 200"]

  - name: "Verify HTTPS error response is valid"
    action: assert
    args: ["${https_error_response.status_code}", "==", "500", "HTTPS error response should be 500"]

  - name: "Verify HTTPS POST response is valid"
    action: assert
    args: ["${https_post_response.status_code}", "==", "200", "HTTPS POST response should be 200"]

  - name: "Test completed successfully"
    action: log
    args: ["âœ… All HTTPS tests completed successfully!"] 