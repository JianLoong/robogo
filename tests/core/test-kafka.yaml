testcase: "Kafka Integration"
variables:
  vars:
    kafka_broker: "localhost:9092"
    topic: "robogo_test"
    message: "hello from robogo"
steps:
  - name: "Publish message"
    action: kafka
    args: ["publish", "${kafka_broker}", "${topic}", "${message}"]
  - name: "Consume message"
    action: kafka
    args: ["consume", "${kafka_broker}", "${topic}", {fromOffset: "first", count: 1, timeout: 5}]
    result: consumed
  - name: "Assert consumed"
    action: assert
    args: ["${consumed}", "contains", "${message}"]