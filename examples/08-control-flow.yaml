testcase: "TC-CONDITIONAL-EXECUTION"
description: "Test conditional execution with explicit test scenarios"

variables:
  vars:
    test_value: "5"
    threshold: "3"
    user_role: "admin"
    feature_enabled: "true"
    environment: "production"

steps:
  # Basic conditional tests
  - name: "Always execute this step"
    if: "true"
    action: log
    args: ["This step always runs"]

  - name: "Never execute this step"
    if: "false"
    action: log
    args: ["This step should be skipped"]

  # Variable-based conditions
  - name: "Execute when value exceeds threshold"
    if: "${test_value} > ${threshold}"
    action: log
    args: ["Value ${test_value} is greater than threshold ${threshold}"]

  - name: "Skip when value is below threshold"
    if: "${test_value} < ${threshold}"
    action: log
    args: ["This should not run - value too low"]

  # Role-based access control testing
  - name: "Admin-only functionality"
    if: "${user_role} == admin"
    action: log
    args: ["Admin user ${user_role} can access this feature"]

  - name: "Non-admin users blocked"
    if: "${user_role} == guest"
    action: log
    args: ["Guest users should not see this"]

  # Feature flag testing  
  - name: "Feature enabled path"
    if: "${feature_enabled} == true"
    action: log
    args: ["Feature is enabled, showing new functionality"]

  - name: "Feature disabled fallback"
    if: "${feature_enabled} == false"
    action: log
    args: ["Feature disabled, using legacy behavior"]

  # Environment-specific logic
  - name: "Production-only security check"
    if: "${environment} == production"
    action: log
    args: ["Running enhanced security validation in production"]

  - name: "Development debugging enabled"  
    if: "${environment} == development"
    action: log
    args: ["Debug logging enabled in development"]

  # Complex condition testing
  - name: "Multiple condition validation"
    if: "${user_role} == admin && ${environment} == production"
    action: log
    args: ["Admin user in production environment"]

  # Test variable assignment in conditional context
  - name: "Set admin privileges variable"
    if: "${user_role} == admin"
    action: variable
    args: ["has_admin_privileges", "true"]

  # Test assertions with conditions
  - name: "Assert threshold comparison"
    if: "${test_value} > ${threshold}"
    action: assert
    args: ["${test_value}", ">", "${threshold}"]

  # Final confirmation
  - name: "Conditional execution tests completed"
    action: log
    args: ["All conditional execution scenarios validated"]