testcase: "SWIFT MT103 Generation"
variables:
  vars:
    bank_bic: "DEUTDEFF"
    currency: "EUR"
    amount: "1000.00"
    transaction_id: "TXN123456"
steps:

  - name: "Generate transaction timestamp"
    action: get_time
    args: ["unix_ms"]
    result: timestamp_ms

  - name: "Create unique transaction ID"
    action: concat
    args: ["TXN", "${timestamp_ms}"]
    result: transaction_id

  - name: "Get current date"
    action: get_time
    args: ["date"]
    result: current_date

  - name: "Generate MT103 SWIFT Message"
    action: template
    args:
      - "templates/mt103.tmpl"
      -
        Sender:
          BIC: "${sender_bic}"
          Account: "${sender_account}"
          Name: "${sender_name}"
        Beneficiary:
          Account: "${beneficiary_account}"
          Name: "${beneficiary_name}"
        TransactionID: "${transaction_id}"
        Timestamp: "${timestamp_ms}"
        Date: "${current_date}"
        Currency: "${currency}"
        Amount: "${amount}"
        Reference: "${reference}"
    result: mt103_message

  - name: Log Swift Message
    action: log
    args: ["Generated SWIFT MT103 message:\n${mt103_message}"]