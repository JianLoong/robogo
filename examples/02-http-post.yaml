testcase: "TC-HTTP-POST-VERIFY"
description: "HTTP POST test with data verification"

variables:
  vars:
    base_url: "https://httpbin.org/post"
    test_data: "MyTestData"

steps:
  - name: "Make HTTP POST request"
    action: http
    args: ["POST", "${base_url}", "${test_data}"]
    result: "http_response"

  - name: "Verify status code"
    action: assert
    args: ["${http_response.status_code}", "==", "200", "Should return 200 OK"]

  - name: "Log response body"
    action: log
    args: ["Response body:", "${http_response.body}"]

  - name: "Verify posted data appears in response"
    action: assert
    args: ["${http_response.body}", "contains", "${test_data}", "Posted data should appear in response"]

  - name: "Verify URL appears in response"
    action: assert
    args: ["${http_response.body}", "contains", "${base_url}", "URL should appear in response"]

  - name: "Check that origin field exists"
    action: assert
    args: ["${http_response.body}", "contains", "origin", "Origin field should exist"]

  - name: "Log verification success"
    action: log
    args: ["Data verification successful! Posted data found in response."]